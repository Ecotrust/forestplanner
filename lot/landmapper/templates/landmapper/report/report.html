{% extends 'landmapper/base.html' %}
{% load static %}
{% load humanize %}

{% block styles %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'landmapper/css/report.css' %}">
{% endblock styles %}

{% block extra_head_scripts %}

{% endblock extra_head_scripts %}

{% block content %}
    <section id="section-property" class="section-report map-wrap row no-gutters">
        <div class="d-flex no-gutters align-items-start justify-content-center section-flex-wrap">
            <img src="/landmapper/report/{{ property_id }}/property/map" class="property-map-image">
            <div class="scalebar-wrap">
                <img src="/landmapper/report/{{ property_id }}/scalebar" class="scalebar"/>
            </div>
            <aside class="content-panel">
                <h2>Your property</h2>
                <h1>{{ property_name }}</h1>
                <p>Report generated on: {{property_report.date}}</p>

                <div class="property-report-data">
                    {% for datum in property_report.property.data %}
                        <p>{{ datum.0 }}: {{ datum.1 }}</p>
                    {% endfor %}
                </div>

                <hr class="d-print-none" />

                <h2 class="d-print-none">All maps of your property</h2>
                <div class="anchor-links align-items-end d-print-none">
                    <a href="#section-aerial">Aerial</a> | <a href="#section-street">Street</a> | <a href="#section-terrain">Terrain</a> | <a href="#section-streams">Streams</a><br /><a href="#">Forest Types</a> | <a href="#section-soil-types">Soil Types</a>
                </div>

                <a href="/landmapper/report/{{ property_id }}/pdf" class="btn btn-primary d-print-none" target="_blank">Download all maps</a>
                <button type="button" class="btn btn-primary copy-link d-print-none" title="Copied to clipboard">Share maps</button>
            </aside>
        </div>
    </section>

    <section id="section-aerial" class="section-report map-wrap row no-gutters">
        <div class="col-12 d-flex no-gutters justify-content-center">
            <div class="col-auto">
                <section class="map-image-wrap">
                    <img src="/landmapper/report/{{ property_id }}/aerial/map" class="property-map-image">
                    <div class="scalebar-wrap">
                        <img src="/landmapper/report/{{ property_id }}/scalebar" class="scalebar"/>
                    </div>
                </section>
            </div>
            <aside class="col-auto content-panel">
                <h1>Aerial Photo</h1>
                <h3>{{ property_name }}</h3>

                <div class="legend-wrap">
                    <img src="{{ property_report.aerial.legend }}" />
                </div>

                <div class="button-wrap d-print-none">
                    <a href="/landmapper/report/{{ property_id }}/pdf" class="btn btn-primary" target="_blank">Download</a>
                    <button type="button" class="btn btn-primary copy-link" title="Copied to clipboard">Share</button>
                </div>
            </aside>
        </div>
    </section>

    <section id="section-street" class="section-report map-wrap row no-gutters">
        <div class="col-12 d-flex no-gutters justify-content-center">
            <div class="col-auto">
                <section class="map-image-wrap">
                    <img src="/landmapper/report/{{ property_id }}/street/map" class="property-map-image" />
                    <div class="scalebar-wrap">
                        <img src="/landmapper/report/{{ property_id }}/scalebar" class="scalebar"/>
                    </div>
                </section>
            </div>
            <aside class="col-auto content-panel">
                <h1>Street Map</h1>
                <h3>{{ property_name }}</h3>

                <div class="legend-wrap">
                    <img src="{{ property_report.street.legend }}" />
                </div>

                <div class="button-wrap d-print-none">
                    <a href="/landmapper/report/{{ property_id }}/pdf" class="btn btn-primary" target="_blank">Download</a>
                    <button type="button" class="btn btn-primary copy-link" title="Copied to clipboard">Share</button>
                </div>
            </aside>
        </div>
    </section>

    <section id="section-terrain" class="section-report map-wrap row no-gutters">
        <div class="col-12 d-flex no-gutters justify-content-center">
            <div class="col-auto">
                <section class="map-image-wrap">
                    <img src="/landmapper/report/{{ property_id }}/terrain/map" class="property-map-image">
                    <div class="scalebar-wrap">
                        <img src="/landmapper/report/{{ property_id }}/scalebar" class="scalebar"/>
                    </div>
                </section>
            </div>
            <aside class="col-auto content-panel">
                <h1>Terrain Map</h1>
                <h3>{{ property_name }}</h3>

                <div class="legend-wrap">
                    <img src="{{ property_report.terrain.legend }}" />
                </div>

                <div class="button-wrap d-print-none">
                    <a href="/landmapper/report/{{ property_id }}/pdf" class="btn btn-primary" target="_blank">Download</a>
                    <button type="button" class="btn btn-primary copy-link" title="Copied to clipboard">Share</button>
                </div>
            </aside>
        </div>
    </section>

    <section id="section-streams" class="section-report map-wrap row no-gutters">
        <div class="col-12 d-flex no-gutters justify-content-center">
            <div class="col-auto">
                <section class="map-image-wrap">
                    <img src="/landmapper/report/{{ property_id }}/stream/map" class="property-map-image">
                    <div class="scalebar-wrap">
                        <img src="/landmapper/report/{{ property_id }}/scalebar" class="scalebar"/>
                    </div>
                </section>
            </div>
            <aside class="col-auto content-panel">
                <h1>Streams Map</h1>
                <h3>{{ property_name }}</h3>

                <div class="legend-wrap">
                    <img src="{{ property_report.streams.legend }}" />
                </div>

                <div class="button-wrap d-print-none">
                    <a href="/landmapper/report/{{ property_id }}/pdf" class="btn btn-primary" target="_blank">Download</a>
                    <button type="button" class="btn btn-primary copy-link" title="Copied to clipboard">Share</button>
                </div>
            </aside>
        </div>
    </section>

    <section id="section-soil-types" class="section-report map-wrap row no-gutters">
        <div class="col-12 d-flex no-gutters justify-content-center">
            <div class="col-auto">
                <section class="map-image-wrap">
                    <img src="/landmapper/report/{{ property_id }}/soil_types/map" class="property-map-image">
                    <div class="scalebar-wrap">
                        <img src="/landmapper/report/{{ property_id }}/scalebar" class="scalebar"/>
                    </div>
                </section>
            </div>

            <aside class="col-auto content-panel">
                <h1>Soil Types Map</h1>
                <h3>{{ property_name }}</h3>

                <div class="legend-wrap">
                    <img src="{{ property_report.soils.legend }}" />
                </div>

                <div class="button-wrap d-print-none">
                    <a href="/landmapper/report/{{ property_id }}/pdf" class="btn btn-primary" target="_blank">Download</a>
                    <button type="button" class="btn btn-primary copy-link" title="Copied to clipboard">Share</button>
                </div>
            </aside>
        </div>
    </section>

    <section class="section-report map-wrap row no-gutters pb-5">
        <div class="col-12 d-flex no-gutters justify-content-start">
            <div class="col-1"></div>
            <div class="col-10 content-panel">
                <h1>Soil Type Table</h1>
                <h3>{{ property_name }}</h3>
                <h2>Page 2 of 2</h2>
            </div>
            <div class="col-1"></div>
        </div>
        <div class="col-12 no-gutters">
            <div class="property-report-data row no-gutters">
                {% for soil_type in property_report.soils.data %}
                    <div class="col-1"></div>
                    <ul class="list-group list-group-flush {% cycle 'col-4' 'col-4' %}">
                        <li class="list-group-item">{{ soil_type.musym }}</li>
                        <li class="list-group-item">{{ soil_type.muname }}</li>
                        <!-- <li class="list-group-item">{{ soil_type.acres }}</li> -->
                        {% if soil_type.drclssd %}
                          <li class="list-group-item">Drainage: {{ soil_type.drclssd }}</li>
                        {% endif %}
                        {% if soil_type.avgsi or soil_type.avgsi == 0 %}
                          <li class="list-group-item">Site Index: {{ soil_type.avgsi|floatformat:2|intcomma }}</li>
                        {% endif %}
                        {% if soil_type.frphrtd %}
                          <li class="list-group-item">Erosion Hazard: {{ soil_type.frphrtd }}</li>
                        {% endif %}
                        {% if soil_type.avg_rs_l or soil_type.avg_rs_h %}
                          <li class="list-group-item">
                            Depth to Soil:
                            {% if soil_type.avg_rs_l %}
                              {{ soil_type.avg_rs_l|floatformat:1 }}
                              {% if soil_type.avg_rs_h %}
                                -
                              {% endif %}
                            {% endif %}
                            {% if soil_type.avg_rs_h %}
                              {{ soil_type.avg_rs_h|floatformat:1 }}
                            {% endif %}
                            cm
                          </li>
                        {% endif %}
                    </ul>
                    <div class="col-1"></div>
                {% endfor %}
            </div>
        </div>
    </section>

{% endblock content %}

{% block footer_scripts %}
    <script src="{% static 'landmapper/js/report.js' %}"></script>
{% endblock footer_scripts %}
